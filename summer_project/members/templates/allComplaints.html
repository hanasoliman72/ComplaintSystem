<!-- templates/complaints/all_complaints.html -->
<h2>All Complaints & Suggestions</h2>

<table border="1">
    <tr>
        <th>Type</th>
        <th>Status</th>
        <th>Title</th>
        <th>Description</th>
        <th>Current Department</th>
        <th>Assign to Department</th>
    </tr>

    {% for complaint in complaints %}
    <tr>
        <td>{{ complaint.Type }}</td>
        <td>{{ complaint.Status }}</td>
        <td>{{ complaint.Title }}</td>
        <td>{{ complaint.Description }}</td>
        <td>{{ complaint.DepartmentId.DepartmentName }}</td>
        <td>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="complaint_id" value="{{ complaint.pk }}">
                <select name="department_id">
                    {% for dept in departments %}
                        <option value="{{ dept.pk }}" {% if complaint.DepartmentId == dept %}selected{% endif %}>
                            {{ dept.DepartmentName }}
                        </option>
                    {% endfor %}
                </select>
                <button type="submit">Assign</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
